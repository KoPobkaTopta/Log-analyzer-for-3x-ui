# 3x-ui Log Analyzer

3x-ui Log Analyzer - это специализированное графическое приложение на Python для анализа лог-файлов, получаемых с панели 3x-ui. Это инструмент предназначен для администраторов и пользователей 3x-ui, позволяющий эффективно обрабатывать и анализировать логи системы.

## Возможности

- Загрузка лог-файлов 3x-ui из любой директории
- Фильтрация логов по пользователю (email)
- Показ всех IP (email)
- Поиск по домену или IP
- Исключение определенных доменов или IP из результатов
- Фильтрация по временному диапазону
- Отображение только уникальных доменов/IP
- Возможность скрытия/показа IP-адресов из списка
- Возможность определения использования Torrent у клиента, а также список: когда и к какому адресу обращался клиент

![image](https://github.com/user-attachments/assets/946f578f-167c-4e51-b063-78f7b55aa340)

## Требования

- Python 3.6+
- PyQt6
- Включённый режим блокировки Bittorent и изменённое правило маршрутизации для детектирования torrent


## Установка

Для Windows x64 скачайте сам [файл](https://github.com/KoPobkaTopta/Log-analyzer-for-3x-ui/blob/main/log_analyzer.exe).

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/KoPobkaTopta/Log-analyzer-for-3x-ui.git
   ```

2. Перейдите в директорию проекта:
   ```
   cd Log-analyzer-for-3x-ui
   ```

3. Установите необходимые зависимости:
   ```
   pip install PyQt6
   ```

## Использование

Запустите скрипт с помощью Python:

```
python log_analyzer.py
```

После запуска приложения:

1. Нажмите кнопку "Выбрать файл логов" и выберите ваш лог-файл из 3x-ui.
2. Используйте различные фильтры для анализа логов:
   - Выберите конкретного пользователя по email
   - Посмотрите используеть ли клиент Torrent
   - Введите домен или IP для поиска
   - Укажите временной диапазон
   - При необходимости, используйте опцию отображения только уникальных доменов/IP
3. Нажмите кнопку "Поиск" для отображения результатов.
4. Используйте кнопку "Скрыть IP" для убирание из списка уникальных IP-адресов.

## Инструкция как использовать Torrent detecter

Для корректной работы Torrent detecter необходимо, чтобы в настройках 3x-ui в разделе «Настройки Xray» > «Protection Shield» была включена опция «Block BitTorrent Protocol». Также надо создать новое правило для правильного детектирования torrent у клиента, в «Настройки Xray» > «Outbounds» > «Add Outbound» > В Protocol выбираем «Blackhole» и в Tag прописываем: torrent
Дальше в «Routing Rules» > И в 3 правиле, где стоит Bittorrent, нажимаем по нему на 3 точки и «Edit», выбираем в «Outbound Tag»: torrent. Сохраняем и перезапускаем Xray.

## Создание исполняемого файла

Вы можете создать автономный исполняемый файл с помощью PyInstaller:
1. Установите PyInstaller:
   ```
   pip install pyinstaller
   ```

2. Создайте .exe файл:
   ```
   pyinstaller --onefile --windowed log_analyzer.py
   ```

3. Найдите созданный .exe файл в папке `dist`.

## Безопасность и конфиденциальность

Этот инструмент предназначен для анализа логов локально на вашем компьютере. Он не отправляет никакие данные в интернет. Тем не менее, пожалуйста, обращайтесь с лог-файлами осторожно, так как они могут содержать конфиденциальную информацию.

## Вклад в проект

Если у вас есть предложения по улучшению этого проекта или адаптации его под другие панели управления xray, пожалуйста, создайте issue или отправьте pull request.

## Лицензия

[MIT License](https://opensource.org/licenses/MIT)

## Отказ от ответственности

Этот инструмент предназначен только для легального использования. Пользователи несут ответственность за соблюдение всех применимых законов и правил при использовании этого инструмента и анализе логов.
